
#include "StdAfx.h"
#include "HuffmanCoding.h"

struct HuffmanDN
{
	int l, r, c;
};

static HuffmanDN decode1[511] =
{
	{0,0,156},
	{0,0,114},
	{0,0,146},
	{0,0,164},
	{0,0,92},
	{0,0,82},
	{0,0,176},
	{0,0,226},
	{0,0,196},
	{0,0,228},
	{0,0,120},
	{0,0,194},
	{0,0,84},
	{0,0,208},
	{0,0,152},
	{0,0,116},
	{0,0,102},
	{0,0,184},
	{0,0,202},
	{0,0,232},
	{0,0,204},
	{0,0,153},
	{0,0,172},
	{0,0,134},
	{0,0,212},
	{0,0,193},
	{0,0,180},
	{0,0,149},
	{0,0,106},
	{0,0,210},
	{0,0,224},
	{0,0,88},
	{0,0,137},
	{0,0,104},
	{0,0,162},
	{0,0,166},
	{0,0,74},
	{0,0,170},
	{0,0,105},
	{0,0,168},
	{0,0,225},
	{0,0,198},
	{0,0,209},
	{0,0,145},
	{0,0,201},
	{0,0,200},
	{0,0,142},
	{0,0,169},
	{0,0,216},
	{0,0,154},
	{0,0,165},
	{0,0,90},
	{0,0,89},
	{0,0,178},
	{0,0,78},
	{0,0,240},
	{0,0,97},
	{0,0,101},
	{0,0,76},
	{0,0,197},
	{0,0,195},
	{0,0,161},
	{0,0,58},
	{0,0,140},
	{0,0,112},
	{0,0,177},
	{0,0,150},
	{0,0,108},
	{0,0,81},
	{0,0,148},
	{0,0,60},
	{0,0,98},
	{0,0,56},
	{0,0,100},
	{0,0,113},
	{0,0,86},
	{0,0,85},
	{0,0,133},
	{0,0,141},
	{0,0,73},
	{0,0,50},
	{0,0,49},
	{0,0,70},
	{0,0,53},
	{0,0,77},
	{0,0,52},
	{0,0,69},
	{0,0,42},
	{0,0,83},
	{0,0,163},
	{0,0,54},
	{0,0,57},
	{0,0,45},
	{0,0,44},
	{0,0,41},
	{0,0,138},
	{0,0,99},
	{0,0,46},
	{0,0,51},
	{0,0,38},
	{0,0,147},
	{0,0,26},
	{0,0,43},
	{0,0,75},
	{0,0,139},
	{0,0,37},
	{0,0,28},
	{0,0,182},
	{0,0,67},
	{0,0,25},
	{0,0,230},
	{0,0,214},
	{0,0,206},
	{0,0,213},
	{0,0,242},
	{0,0,22},
	{0,0,220},
	{0,0,35},
	{0,0,186},
	{0,0,244},
	{0,0,131},
	{0,0,21},
	{0,0,122},
	{0,0,185},
	{0,0,174},
	{0,0,236},
	{0,0,124},
	{0,0,188},
	{0,0,217},
	{0,0,205},
	{0,0,144},
	{0,0,160},
	{0,0,181},
	{0,0,173},
	{0,0,229},
	{0,0,109},
	{0,0,30},
	{0,0,121},
	{0,0,135},
	{0,0,110},
	{0,0,118},
	{0,0,241},
	{0,0,218},
	{0,0,179},
	{0,0,233},
	{0,0,29},
	{0,0,155},
	{0,0,39},
	{0,0,234},
	{0,0,227},
	{0,0,158},
	{0,0,93},
	{0,0,171},
	{0,0,68},
	{0,0,71},
	{0,0,248},
	{0,0,203},
	{0,0,107},
	{0,0,72},
	{0,0,19},
	{0,0,211},
	{0,0,80},
	{0,0,136},
	{0,0,192},
	{0,0,94},
	{0,0,117},
	{0,0,40},
	{0,0,66},
	{0,0,27},
	{0,0,129},
	{0,0,130},
	{0,0,115},
	{0,0,96},
	{0,0,157},
	{0,0,91},
	{0,0,167},
	{0,0,103},
	{0,0,34},
	{0,0,48},
	{0,0,151},
	{0,0,13},
	{0,0,132},
	{0,0,36},
	{0,0,65},
	{0,0,62},
	{0,0,18},
	{0,0,20},
	{0,0,87},
	{0,0,199},
	{0,0,14},
	{0,0,23},
	{0,0,11},
	{0,0,24},
	{0,0,61},
	{0,0,59},
	{0,0,143},
	{0,0,79},
	{0,0,55},
	{0,0,33},
	{0,0,17},
	{0,0,10},
	{0,0,12},
	{0,0,9},
	{0,0,47},
	{0,0,6},
	{0,0,5},
	{0,0,222},
	{0,0,246},
	{0,0,221},
	{0,0,238},
	{0,0,187},
	{0,0,190},
	{0,0,252},
	{0,0,237},
	{0,0,219},
	{0,0,189},
	{0,0,235},
	{0,0,245},
	{0,0,249},
	{0,0,126},
	{0,0,250},
	{0,0,125},
	{0,0,183},
	{0,0,243},
	{0,0,231},
	{0,0,215},
	{0,0,123},
	{0,0,207},
	{0,0,119},
	{0,0,175},
	{0,0,15},
	{0,0,111},
	{0,0,7},
	{0,0,128},
	{0,0,159},
	{0,0,64},
	{0,0,95},
	{0,0,31},
	{0,0,32},
	{0,0,16},
	{0,0,3},
	{0,0,8},
	{0,0,4},
	{0,0,63},
	{0,0,2},
	{0,0,1},
	{0,0,253},
	{0,0,254},
	{0,0,251},
	{0,0,247},
	{0,0,239},
	{0,0,223},
	{0,0,191},
	{0,0,0},
	{0,0,127},
	{0,0,255},
	{0,1,0},
	{2,3,0},
	{4,5,0},
	{6,7,0},
	{8,9,0},
	{10,11,0},
	{12,13,0},
	{14,15,0},
	{16,17,0},
	{18,19,0},
	{20,21,0},
	{22,23,0},
	{24,25,0},
	{26,27,0},
	{28,29,0},
	{30,31,0},
	{32,33,0},
	{34,35,0},
	{36,37,0},
	{38,39,0},
	{40,41,0},
	{42,43,0},
	{44,45,0},
	{46,47,0},
	{48,49,0},
	{50,51,0},
	{52,53,0},
	{54,55,0},
	{56,57,0},
	{58,59,0},
	{60,61,0},
	{62,63,0},
	{64,65,0},
	{66,67,0},
	{68,69,0},
	{70,71,0},
	{72,73,0},
	{74,75,0},
	{76,77,0},
	{78,79,0},
	{80,81,0},
	{82,83,0},
	{84,85,0},
	{86,87,0},
	{88,89,0},
	{90,91,0},
	{92,93,0},
	{94,95,0},
	{96,97,0},
	{98,99,0},
	{100,101,0},
	{102,103,0},
	{104,105,0},
	{106,107,0},
	{108,109,0},
	{110,111,0},
	{112,113,0},
	{256,114,0},
	{115,116,0},
	{117,118,0},
	{119,120,0},
	{121,122,0},
	{123,124,0},
	{125,126,0},
	{127,257,0},
	{128,129,0},
	{130,131,0},
	{258,132,0},
	{133,259,0},
	{134,135,0},
	{136,260,0},
	{137,138,0},
	{139,140,0},
	{261,141,0},
	{142,262,0},
	{143,144,0},
	{145,146,0},
	{147,148,0},
	{149,150,0},
	{263,264,0},
	{151,152,0},
	{265,153,0},
	{154,266,0},
	{155,156,0},
	{157,267,0},
	{158,159,0},
	{160,268,0},
	{269,270,0},
	{161,271,0},
	{272,162,0},
	{273,274,0},
	{275,276,0},
	{163,164,0},
	{165,166,0},
	{277,167,0},
	{168,278,0},
	{169,170,0},
	{171,172,0},
	{279,280,0},
	{173,174,0},
	{281,282,0},
	{175,283,0},
	{284,285,0},
	{176,286,0},
	{177,178,0},
	{179,287,0},
	{288,289,0},
	{290,291,0},
	{180,181,0},
	{182,292,0},
	{293,183,0},
	{184,294,0},
	{185,186,0},
	{187,295,0},
	{188,296,0},
	{297,189,0},
	{190,298,0},
	{191,192,0},
	{299,193,0},
	{300,301,0},
	{302,194,0},
	{303,304,0},
	{305,195,0},
	{306,196,0},
	{197,307,0},
	{308,198,0},
	{199,309,0},
	{200,310,0},
	{311,312,0},
	{201,313,0},
	{314,315,0},
	{316,317,0},
	{318,319,0},
	{202,320,0},
	{321,322,0},
	{323,203,0},
	{324,325,0},
	{326,327,0},
	{328,329,0},
	{330,331,0},
	{332,333,0},
	{334,335,0},
	{336,337,0},
	{338,339,0},
	{340,341,0},
	{342,343,0},
	{344,345,0},
	{346,347,0},
	{348,349,0},
	{350,351,0},
	{352,353,0},
	{354,355,0},
	{356,204,0},
	{357,358,0},
	{359,360,0},
	{361,362,0},
	{363,205,0},
	{364,365,0},
	{366,367,0},
	{368,369,0},
	{370,371,0},
	{206,372,0},
	{207,373,0},
	{374,375,0},
	{208,376,0},
	{209,210,0},
	{377,378,0},
	{211,212,0},
	{213,214,0},
	{215,379,0},
	{216,217,0},
	{380,218,0},
	{219,220,0},
	{381,221,0},
	{222,382,0},
	{223,383,0},
	{224,384,0},
	{225,385,0},
	{226,227,0},
	{228,386,0},
	{387,229,0},
	{388,389,0},
	{230,390,0},
	{391,392,0},
	{393,231,0},
	{394,232,0},
	{395,396,0},
	{397,233,0},
	{398,399,0},
	{234,235,0},
	{400,401,0},
	{236,402,0},
	{403,404,0},
	{405,406,0},
	{237,407,0},
	{408,238,0},
	{409,410,0},
	{411,412,0},
	{413,414,0},
	{415,239,0},
	{416,417,0},
	{418,419,0},
	{240,420,0},
	{241,421,0},
	{422,423,0},
	{424,425,0},
	{426,427,0},
	{428,429,0},
	{430,431,0},
	{242,432,0},
	{433,434,0},
	{435,243,0},
	{436,437,0},
	{438,439,0},
	{440,244,0},
	{441,442,0},
	{443,444,0},
	{445,446,0},
	{447,448,0},
	{449,450,0},
	{451,452,0},
	{453,454,0},
	{455,456,0},
	{457,458,0},
	{459,460,0},
	{461,462,0},
	{245,463,0},
	{464,465,0},
	{466,467,0},
	{468,469,0},
	{470,471,0},
	{472,473,0},
	{474,475,0},
	{476,477,0},
	{246,247,0},
	{478,248,0},
	{249,250,0},
	{479,480,0},
	{251,252,0},
	{481,482,0},
	{253,483,0},
	{484,254,0},
	{485,486,0},
	{487,488,0},
	{489,490,0},
	{491,492,0},
	{493,494,0},
	{495,496,0},
	{497,498,0},
	{499,500,0},
	{501,502,0},
	{503,504,0},
	{505,506,0},
	{507,508,0},
	{509,255,0},
};

static HuffmanDN decode2[511] =
{	
	{0,0,232},
	{0,0,209},
	{0,0,208},
	{0,0,161},
	{0,0,104},
	{0,0,220},
	{0,0,244},
	{0,0,252},
	{0,0,180},
	{0,0,71},
	{0,0,248},
	{0,0,162},
	{0,0,188},
	{0,0,122},
	{0,0,160},
	{0,0,143},
	{0,0,163},
	{0,0,52},
	{0,0,240},
	{0,0,236},
	{0,0,210},
	{0,0,151},
	{0,0,249},
	{0,0,242},
	{0,0,238},
	{0,0,80},
	{0,0,29},
	{0,0,43},
	{0,0,94},
	{0,0,197},
	{0,0,152},
	{0,0,133},
	{0,0,110},
	{0,0,172},
	{0,0,90},
	{0,0,126},
	{0,0,27},
	{0,0,184},
	{0,0,116},
	{0,0,75},
	{0,0,30},
	{0,0,13},
	{0,0,241},
	{0,0,62},
	{0,0,40},
	{0,0,222},
	{0,0,193},
	{0,0,124},
	{0,0,120},
	{0,0,185},
	{0,0,23},
	{0,0,228},
	{0,0,141},
	{0,0,81},
	{0,0,174},
	{0,0,227},
	{0,0,87},
	{0,0,46},
	{0,0,142},
	{0,0,204},
	{0,0,250},
	{0,0,234},
	{0,0,216},
	{0,0,37},
	{0,0,11},
	{0,0,165},
	{0,0,26},
	{0,0,67},
	{0,0,93},
	{0,0,92},
	{0,0,198},
	{0,0,54},
	{0,0,171},
	{0,0,226},
	{0,0,96},
	{0,0,176},
	{0,0,187},
	{0,0,218},
	{0,0,49},
	{0,0,47},
	{0,0,224},
	{0,0,35},
	{0,0,121},
	{0,0,153},
	{0,0,58},
	{0,0,89},
	{0,0,179},
	{0,0,195},
	{0,0,148},
	{0,0,146},
	{0,0,206},
	{0,0,217},
	{0,0,68},
	{0,0,102},
	{0,0,115},
	{0,0,168},
	{0,0,74},
	{0,0,21},
	{0,0,230},
	{0,0,231},
	{0,0,118},
	{0,0,137},
	{0,0,178},
	{0,0,59},
	{0,0,177},
	{0,0,105},
	{0,0,76},
	{0,0,86},
	{0,0,134},
	{0,0,22},
	{0,0,246},
	{0,0,212},
	{0,0,225},
	{0,0,101},
	{0,0,213},
	{0,0,135},
	{0,0,138},
	{0,0,200},
	{0,0,113},
	{0,0,108},
	{0,0,88},
	{0,0,192},
	{0,0,5},
	{0,0,233},
	{0,0,60},
	{0,0,128},
	{0,0,98},
	{0,0,114},
	{0,0,243},
	{0,0,139},
	{0,0,145},
	{0,0,99},
	{0,0,154},
	{0,0,199},
	{0,0,214},
	{0,0,106},
	{0,0,173},
	{0,0,10},
	{0,0,203},
	{0,0,51},
	{0,0,42},
	{0,0,131},
	{0,0,1},
	{0,0,31},
	{0,0,20},
	{0,0,48},
	{0,0,28},
	{0,0,166},
	{0,0,56},
	{0,0,254},
	{0,0,202},
	{0,0,189},
	{0,0,119},
	{0,0,2},
	{0,0,156},
	{0,0,61},
	{0,0,70},
	{0,0,15},
	{0,0,149},
	{0,0,157},
	{0,0,14},
	{0,0,38},
	{0,0,194},
	{0,0,201},
	{0,0,85},
	{0,0,69},
	{0,0,97},
	{0,0,150},
	{0,0,136},
	{0,0,221},
	{0,0,45},
	{0,0,186},
	{0,0,181},
	{0,0,190},
	{0,0,57},
	{0,0,7},
	{0,0,164},
	{0,0,64},
	{0,0,130},
	{0,0,50},
	{0,0,44},
	{0,0,6},
	{0,0,129},
	{0,0,103},
	{0,0,245},
	{0,0,229},
	{0,0,140},
	{0,0,205},
	{0,0,100},
	{0,0,19},
	{0,0,73},
	{0,0,158},
	{0,0,4},
	{0,0,253},
	{0,0,237},
	{0,0,41},
	{0,0,3},
	{0,0,207},
	{0,0,211},
	{0,0,182},
	{0,0,55},
	{0,0,39},
	{0,0,125},
	{0,0,170},
	{0,0,0},
	{0,0,24},
	{0,0,109},
	{0,0,84},
	{0,0,112},
	{0,0,144},
	{0,0,25},
	{0,0,147},
	{0,0,12},
	{0,0,65},
	{0,0,53},
	{0,0,9},
	{0,0,196},
	{0,0,18},
	{0,0,78},
	{0,0,82},
	{0,0,117},
	{0,0,72},
	{0,0,34},
	{0,0,77},
	{0,0,32},
	{0,0,36},
	{0,0,17},
	{0,0,235},
	{0,0,169},
	{0,0,107},
	{0,0,123},
	{0,0,83},
	{0,0,251},
	{0,0,219},
	{0,0,155},
	{0,0,91},
	{0,0,167},
	{0,0,175},
	{0,0,215},
	{0,0,183},
	{0,0,66},
	{0,0,159},
	{0,0,95},
	{0,0,33},
	{0,0,16},
	{0,0,79},
	{0,0,63},
	{0,0,247},
	{0,0,8},
	{0,0,132},
	{0,0,111},
	{0,0,239},
	{0,0,223},
	{0,0,191},
	{0,0,127},
	{0,0,255},
	{0,1,0},
	{2,3,0},
	{4,5,0},
	{6,7,0},
	{8,9,0},
	{10,11,0},
	{12,13,0},
	{14,15,0},
	{16,17,0},
	{18,19,0},
	{20,256,0},
	{21,22,0},
	{23,24,0},
	{25,26,0},
	{27,28,0},
	{29,30,0},
	{31,32,0},
	{33,34,0},
	{35,36,0},
	{37,38,0},
	{39,40,0},
	{41,42,0},
	{43,257,0},
	{44,45,0},
	{46,47,0},
	{48,49,0},
	{50,51,0},
	{52,53,0},
	{54,55,0},
	{56,57,0},
	{58,59,0},
	{60,61,0},
	{62,63,0},
	{64,65,0},
	{66,67,0},
	{68,69,0},
	{70,71,0},
	{72,73,0},
	{74,75,0},
	{76,77,0},
	{78,79,0},
	{80,81,0},
	{82,83,0},
	{84,85,0},
	{86,87,0},
	{88,89,0},
	{90,91,0},
	{92,93,0},
	{94,95,0},
	{96,97,0},
	{98,99,0},
	{100,101,0},
	{102,103,0},
	{104,105,0},
	{106,107,0},
	{108,109,0},
	{110,111,0},
	{112,258,0},
	{113,114,0},
	{115,116,0},
	{117,118,0},
	{119,120,0},
	{121,122,0},
	{123,124,0},
	{125,126,0},
	{127,128,0},
	{129,130,0},
	{131,132,0},
	{133,134,0},
	{135,136,0},
	{137,138,0},
	{139,140,0},
	{141,142,0},
	{143,144,0},
	{145,146,0},
	{147,148,0},
	{149,150,0},
	{151,152,0},
	{153,154,0},
	{155,156,0},
	{157,158,0},
	{159,160,0},
	{161,162,0},
	{163,164,0},
	{165,166,0},
	{167,168,0},
	{169,170,0},
	{171,172,0},
	{173,174,0},
	{175,176,0},
	{177,178,0},
	{179,180,0},
	{181,182,0},
	{183,184,0},
	{185,186,0},
	{187,188,0},
	{189,190,0},
	{191,192,0},
	{193,194,0},
	{195,196,0},
	{197,198,0},
	{199,200,0},
	{259,201,0},
	{202,203,0},
	{204,205,0},
	{206,207,0},
	{208,209,0},
	{210,211,0},
	{212,213,0},
	{214,215,0},
	{216,217,0},
	{218,219,0},
	{220,221,0},
	{222,223,0},
	{224,225,0},
	{226,260,0},
	{227,228,0},
	{229,230,0},
	{261,262,0},
	{231,232,0},
	{263,233,0},
	{234,235,0},
	{236,264,0},
	{265,266,0},
	{237,267,0},
	{268,269,0},
	{238,270,0},
	{271,272,0},
	{273,274,0},
	{275,239,0},
	{276,277,0},
	{278,240,0},
	{241,279,0},
	{280,281,0},
	{282,283,0},
	{284,285,0},
	{286,242,0},
	{243,287,0},
	{288,289,0},
	{290,291,0},
	{292,293,0},
	{294,295,0},
	{244,296,0},
	{297,298,0},
	{299,300,0},
	{301,302,0},
	{303,304,0},
	{245,305,0},
	{306,246,0},
	{307,308,0},
	{309,247,0},
	{310,311,0},
	{248,312,0},
	{313,314,0},
	{315,316,0},
	{317,318,0},
	{319,320,0},
	{249,321,0},
	{322,323,0},
	{324,325,0},
	{326,327,0},
	{328,329,0},
	{330,331,0},
	{332,333,0},
	{334,335,0},
	{336,337,0},
	{338,250,0},
	{339,340,0},
	{251,341,0},
	{342,343,0},
	{344,345,0},
	{346,347,0},
	{348,349,0},
	{350,351,0},
	{352,353,0},
	{354,355,0},
	{356,357,0},
	{358,359,0},
	{360,361,0},
	{362,363,0},
	{364,365,0},
	{366,367,0},
	{368,369,0},
	{370,371,0},
	{372,373,0},
	{374,375,0},
	{376,377,0},
	{378,379,0},
	{380,381,0},
	{252,382,0},
	{383,384,0},
	{385,386,0},
	{387,388,0},
	{389,390,0},
	{391,392,0},
	{393,394,0},
	{395,396,0},
	{397,398,0},
	{399,400,0},
	{401,402,0},
	{403,404,0},
	{405,406,0},
	{407,408,0},
	{409,410,0},
	{411,412,0},
	{413,414,0},
	{415,416,0},
	{253,417,0},
	{418,419,0},
	{420,421,0},
	{422,423,0},
	{424,425,0},
	{426,427,0},
	{428,429,0},
	{430,431,0},
	{432,433,0},
	{434,435,0},
	{436,437,0},
	{438,439,0},
	{254,440,0},
	{441,442,0},
	{443,444,0},
	{445,446,0},
	{447,448,0},
	{449,450,0},
	{451,452,0},
	{453,454,0},
	{455,456,0},
	{457,458,0},
	{459,460,0},
	{461,462,0},
	{463,464,0},
	{465,466,0},
	{467,468,0},
	{469,470,0},
	{471,472,0},
	{473,474,0},
	{475,476,0},
	{477,478,0},
	{479,480,0},
	{481,482,0},
	{483,484,0},
	{485,486,0},
	{487,488,0},
	{489,490,0},
	{491,492,0},
	{493,494,0},
	{495,496,0},
	{497,498,0},
	{499,500,0},
	{501,502,0},
	{503,504,0},
	{505,506,0},
	{507,508,0},
	{509,255,0},
};

static const char* huffmanencode1[256] = {
"00010",
"000010",
"0011101",
"01110010",
"0001110",
"010101011",
"010100001",
"00111101",
"01110100",
"001100110",
"000110110",
"0111000010",
"001000010",
"0101011000",
"0110001011",
"00110100",
"01100001",
"000110010",
"0110000000",
"0100011011",
"0110000001",
"0011000010",
"0010010100",
"0110001110",
"0111000011",
"0001101111",
"0000001101",
"0100110010",
"0001100110",
"0011111100",
"0011100000",
"01001110",
"01010001",
"000011101",
"0101001110",
"0010010110",
"0101011010",
"0000111001",
"01110110101",
"0011111110",
"0100101111",
"01110110000",
"01110001001",
"0000011010",
"01110011101",
"01110011100",
"01110110011",
"001101101",
"0101001111",
"01100010011",
"01100010010",
"01110110100",
"01100011111",
"01100010101",
"01110001110",
"000001100",
"01010110110",
"01110001111",
"01010100010",
"0111001111",
"01010101010",
"0111000101",
"0101011110",
"0010011",
"01000101",
"0101011101",
"0100110001",
"0001101110",
"0100001011",
"01110001000",
"01100010100",
"0100001100",
"0100011010",
"01100000111",
"01001010010",
"0000011011",
"01010010110",
"01100011110",
"01010010010",
"000000111",
"0100100100",
"01010101000",
"00110110001",
"01110001100",
"00111110010",
"01010111110",
"01010111001",
"0110000010",
"01001001011",
"01010000010",
"01010000001",
"0100111111",
"00110110000",
"0100001000",
"0100101101",
"01001000",
"0100110111",
"01010010100",
"01010101011",
"01110110010",
"01010110111",
"01010010101",
"01000000110",
"0101001100",
"01001001101",
"01001010100",
"01000111110",
"0100011000",
"01010100111",
"0011011111",
"0011110000",
"00111001",
"01010100100",
"01010111000",
"00100001101",
"0100110110",
"01000000101",
"0100101110",
"0011110001",
"00100100",
"00111100100",
"0011100010",
"0011000011",
"00100010",
"0011001011",
"00001111",
"00001100",
"00101",
"01000001",
"0100110100",
"0100110101",
"0011000001",
"0101011001",
"01010111111",
"01000110011",
"0011100011",
"0100100111",
"01001001100",
"01110110001",
"0000111000",
"01010100011",
"01100000110",
"01001111000",
"0111011011",
"0011010110",
"01001100001",
"00110011110",
"0000001100",
"01010101001",
"01000111101",
"01010100110",
"0101010000",
"01000000100",
"01000011011",
"01001111011",
"0011111101",
"00100001100",
"0100111110",
"0100000001",
"01000100",
"0011010111",
"01010011011",
"01001010000",
"01110001101",
"00110011111",
"01010000000",
"01001010001",
"0101001000",
"01001010101",
"01001111001",
"01001010011",
"0100001001",
"01000110010",
"0011011100",
"0011001001",
"00110001",
"00110111010",
"01010100101",
"01010000011",
"0011111010",
"01000111100",
"0011011001",
"0001100111",
"00011000",
"01000000111",
"0011001000",
"0010010111",
"011101011",
"0011001110",
"00000010",
"011101110",
"011111",
"0100101100",
"01000111011",
"00111100101",
"01010011010",
"00111000010",
"01010010111",
"01001010111",
"0110001000",
"01001100111",
"01001100110",
"01000010100",
"0100001111",
"01000011010",
"0011010101",
"0001111110",
"00100011",
"00111110011",
"01001100000",
"01000111111",
"0100011100",
"01000111010",
"0001111111",
"0001111101",
"00100000",
"01001111010",
"0011010100",
"0011111000",
"00000001",
"0010010101",
"011100110",
"011000110",
"011110",
"01001001010",
"01001010110",
"00110111011",
"0100000000",
"00111000011",
"0011011110",
"0001111100",
"00011110",
"01000010101",
"0011111011",
"0011111111",
"00000100",
"0011001010",
"00000000",
"011101010",
"011011",
"01010010011",
"0011110011",
"0010000111",
"00011010",
"0011000000",
"00000101",
"011100000",
"011010",
"0100001110",
"00000111",
"00001101",
"011001",
"011101111",
"010110",
"010111",
"1"};

static const char* huffmanencode2[256] = {
"011001000",
"010000101",
"010010000",
"010111111",
"010111011",
"001101011",
"010110000",
"010101010",
"00101110",
"011010011",
"001111100",
"000100110",
"011010000",
"000000110",
"010010111",
"010010100",
"00011010",
"011011110",
"011010101",
"010111000",
"010000111",
"001001011",
"001011011",
"000010100",
"011001001",
"011001110",
"000101000",
"0111111111",
"010001001",
"0111101111",
"000000101",
"010000110",
"011011100",
"00010000",
"011011010",
"000111001",
"011011101",
"000100101",
"010011000",
"011000101",
"000001110",
"010111110",
"001111111",
"0111110110",
"010101111",
"010100101",
"000011011",
"000110111",
"010001000",
"000110110",
"010101110",
"001111110",
"0111100011",
"011010010",
"000101101",
"011000011",
"010001011",
"010101001",
"000111100",
"001010011",
"001101101",
"010010010",
"000001000",
"00100111",
"010101100",
"011010001",
"00000101",
"000101001",
"001000100",
"010011110",
"010010011",
"0110111111",
"011011001",
"010111001",
"001001010",
"000000100",
"001011000",
"011011011",
"011010110",
"00100100",
"0111101110",
"000010111",
"011010111",
"011101010",
"011001011",
"010011101",
"001011001",
"000011010",
"001101001",
"000111101",
"0111111101",
"011101111",
"000101011",
"000101010",
"0111110111",
"00001111",
"000110000",
"010011111",
"001101111",
"001110110",
"010110111",
"001100010",
"001000101",
"010110010",
"0011000010",
"001010101",
"001111010",
"011100110",
"001101000",
"011001010",
"0111111011",
"01001101",
"011001100",
"001100111",
"001110010",
"001000110",
"000000001",
"011011000",
"001010000",
"010001111",
"000010010",
"000111010",
"0111010011",
"011100111",
"000010001",
"011000110",
"0111111110",
"0111000",
"001101110",
"010110001",
"010101101",
"010000100",
"00111000",
"0111111010",
"001011010",
"001100100",
"010100011",
"001010001",
"001100101",
"001110100",
"010110101",
"000010110",
"000011100",
"0111011001",
"011001101",
"001110101",
"001000001",
"011001111",
"001000000",
"010010101",
"010100010",
"0111101010",
"0111111001",
"000111011",
"001110111",
"011101110",
"010010001",
"010010110",
"010111010",
"00000110",
"0111011000",
"0000010011",
"0111010001",
"0111100010",
"010101011",
"000100111",
"010001010",
"011110000",
"001000111",
"011100101",
"011000111",
"000101110",
"0111111100",
"001111011",
"000011000",
"011110100",
"000110001",
"001010100",
"001010010",
"000111110",
"0110111110",
"010100111",
"011000010",
"00000001",
"000000000",
"000010011",
"010100110",
"000110010",
"0111010010",
"010001110",
"010101000",
"0100000",
"001101010",
"000010000",
"010011001",
"000111111",
"011010100",
"0111111000",
"000101100",
"001111000",
"001100110",
"010011100",
"010001101",
"001111101",
"000011101",
"010110110",
"001000010",
"011000000",
"0000010010",
"01111001111",
"0111100110",
"011000001",
"001011111",
"001100011",
"001111001",
"011111010",
"000100100",
"001000011",
"000110011",
"011101101",
"0011000011",
"010100100",
"000001111",
"01111100",
"000111000",
"001100000",
"000101111",
"000011001",
"000010101",
"010110100",
"001001100",
"001001101",
"01111001110",
"001101100",
"000100011",
"011100100",
"0111100101",
"010111101",
"0111101101",
"01010000",
"0111100100",
"000000111",
"0111101100",
"001110011",
"0110001000",
"010110011",
"001011110",
"00101011",
"0111010000",
"0111101011",
"000100010",
"011101011",
"0110001001",
"010111100",
"010001100",
"1"
};


pool_byte_string_ptr HuffmanCoding::Decode(pool_byte_string_ptr bytes, UINT8 huffmanTimes)
{
	const BYTE* data = bytes->data();
	if (huffmanTimes == 0)
	{
		return bytes;
	}

	if (huffmanTimes == 1)
	{
		UINT32 size_m = 0, k, size_i = 0, i, j;
		BYTE* code;
		//确定解压缩后code的长度
		k = 510;
		for (i = 0; i < bytes->size(); i ++)
		{
			for (j = 0; j < 8; j ++)
			{
				if ((data[i] & (1<<j)) == 0) k = decode1[k].l; else k = decode1[k].r;
				if (k<256) k = 510, size_m ++;
			}
		}
//		if (k != 510) return emptystring;

		m_decodeBuffer1.ensure_size( size_m );
		code = m_decodeBuffer1.data();
		//code = (BYTE*)CORE_MALLOC(sizeof(BYTE)*size_m);
		//huff decode
		k = 510;size_i = 0;
		for (i = 0; i < bytes->size(); i ++)
		{
			for (j = 0; j < 8; j ++)
			{
				if ((data[i] & (1<<j)) == 0) k = decode1[k].l; else k = decode1[k].r;
				if (k<256) 
				{
					code[size_i] = (BYTE)decode1[k].c;
					k = 510; size_i ++;
				}
			}
		}
	
		pool_byte_string_ptr huf( new pool_byte_string(code,size_m) );
		//CORE_FREE(code); 
		return huf;
	}
//  huffmantimes == 2
	UINT32 size_m = 0, k, size_i = 0, i, j;
	BYTE* code;
	//确定解压缩后code的长度
	k = 510;
	for (i = 0; i < bytes->size(); i ++)
	{
		for (j = 0; j < 8; j ++)
		{
			if ((data[i] & (1<<j)) == 0) k = decode2[k].l; else k = decode2[k].r;
			if (k<256) k = 510, size_m ++;
		}
	}
	//	if (k != 510) return emptystring;
	m_decodeBuffer1.ensure_size( size_m );
	code = m_decodeBuffer1.data();
	//code = (BYTE*)CORE_MALLOC(sizeof(BYTE)*size_m);
	//huff decode
	k = 510;size_i = 0;
	for (i = 0; i < bytes->size(); i ++)
		for (j = 0; j < 8; j ++)
		{
			if ((data[i] & (1<<j)) == 0) k = decode2[k].l; else k = decode2[k].r;
			if (k<256) 
			{
				code[size_i] = (BYTE)decode2[k].c;
				k = 510; size_i ++;
			}
		}
	size_t size = size_m;
	
	UINT32 size_m2 = 0, size_i2;
	BYTE* code2;
	k = 510;
	//确定解压缩后code的长度
	for (i = 0; i < size; i ++)
	{
		for (j = 0; j < 8; j ++)
		{
			if ((code[i] & (1<<j)) == 0) k = decode1[k].l; else k = decode1[k].r;
			if (k<256) k = 510, size_m2 ++;
		}
	}
//	if (k != 510) return emptystring;
	m_decodeBuffer2.ensure_size(size_m2);
	code2 = m_decodeBuffer2.data();
	//code2 = (BYTE*)CORE_MALLOC(sizeof(BYTE)*size_m2);
	//huff decode
	k = 510;
	size_i2 = 0;
	for (i = 0; i < size; i ++)
	{
		for (j = 0; j < 8; j ++)
		{
			if ((code[i] & (1<<j)) == 0) k = decode1[k].l; else k = decode1[k].r;
			if (k<256) 
			{
				code2[size_i2] = (BYTE)decode1[k].c;
				k = 510, size_i2 ++;
			}
		}
	}

	pool_byte_string_ptr huf2( new pool_byte_string(code2,size_m2) );
	//CORE_FREE(code);
	//CORE_FREE(code2);
	return huf2;
}

UINT8 HuffmanCoding::Encode(pool_byte_string_ptr bytes, size_t bitCount, pool_byte_string_ptr& buf)
{
	//string huffcode1, huffcode2, temp;
	pool_string& temp = m_tempBitString;
	m_tempBitString.resize(0);

	UINT32 i, code1len, code2len;
	for (i = 0; i < bytes->size(); i ++)
	{
		temp.append( huffmanencode1[(*bytes)[i]] );
	}
	code1len = (temp.length() +7)/8;
	m_encodeBuffer1.ensure_size(code1len);
	m_encodeBuffer1.assign(0);
	for (i = 0; i < temp.length(); i ++)
	{
		if ( temp[i] != '0' )
		{
			m_encodeBuffer1[i/8] |= (BYTE)( 1 << (i%8) );
		}
	}
	//  最后 一个 字符 是 0 还是 补 0 的问题

	temp.resize(0);
	for (i = 0; i < code1len; i ++)
	{
		temp.append( huffmanencode2[m_encodeBuffer1[i]] );
	}
	code2len = (temp.length() + 7)/8;
	m_encodeBuffer2.ensure_size(code2len);
	m_encodeBuffer2.assign(0);
	for (i = 0; i < temp.length(); i ++)
	{
		if ( temp[i] != '0' )
		{
			m_encodeBuffer2[i/8] |= (BYTE)( 1 << (i%8) );
		}
	}

	if (bytes->size() < code1len && bytes->size() < code2len) 
	{
		buf = bytes;
		return 0;
	}
	else if (code1len < bytes->size() && code1len < code2len) 
	{
		buf->assign(m_encodeBuffer1.data(), m_encodeBuffer1.size());
		return 1;
	}
	else
	{
		buf->assign(m_encodeBuffer2.data(), m_encodeBuffer2.size());
		return 2;
	}
}

HuffmanCoding::HuffmanCoding()
{
	m_tempBitString.reserve( 4000 );
}



